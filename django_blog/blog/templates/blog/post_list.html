{% extends 'blog/base.html' %}

{% block title %}All Blog Posts{% endblock %}

{% block content %}
<h2>Latest Blog Posts</h2>

{% if user.is_authenticated %}
    <p><a href="{% url 'blog:post_create' %}" class="btn-primary">Create New Post</a></p>
{% endif %}

{% for post in posts %}
    <article class="post-item">
        <h3><a href="{% url 'blog:post_detail' pk=post.pk %}">{{ post.title }}</a></h3>
        <p class="post-meta">
            By: {{ post.author.username }} | Published: {{ post.published_date|date:"F j, Y" }}
        </p>
        <p>{{ post.content|truncatewords:30 }} <a href="{% url 'blog:post_detail' pk=post.pk %}">Read more...</a></p>
    </article>
    <hr>
{% empty %}
    <p>No posts have been published yet. Be the first to post!</p>
{% endfor %}

{% endblock %}